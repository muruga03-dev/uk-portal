{"ast":null,"code":"import _objectSpread from\"C:/Users/murug/OneDrive/Desktop/uk-portal/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import GalleryModal from\"../components/GalleryModal\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Gallery=()=>{const[images,setImages]=useState([]);const[selectedImage,setSelectedImage]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// Use environment variable if set, else fallback to localhost\nconst API_BASE=process.env.REACT_APP_API_URL||\"http://localhost:5000\";useEffect(()=>{const fetchGallery=async()=>{try{const res=await axios.get(\"\".concat(API_BASE,\"/api/admin/gallery\"));if(res.data&&Array.isArray(res.data)){// Make sure URLs are properly encoded\nconst safeImages=res.data.map(img=>_objectSpread(_objectSpread({},img),{},{url:img.url?encodeURI(img.url):\"/fallback.png\"}));setImages(safeImages);}else{setImages([]);}}catch(err){console.error(\"Error fetching gallery:\",err);setError(\"‚ö†Ô∏è Failed to load gallery. Please try again later.\");}finally{setLoading(false);}};fetchGallery();},[API_BASE]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"p-8 text-center text-lg font-semibold animate-pulse\",children:\"\\u23F3 Loading gallery...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"p-8 text-center text-red-600 font-semibold\",children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-bold mb-12 text-center text-green-700 animate-fadeIn\",children:\"\\uD83C\\uDF38 Village Photo Gallery\"}),images.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-lg text-center\",children:\"No images available in the gallery.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6\",children:images.map((img,idx)=>{// Use absolute URL for image\nconst imageUrl=img.url.startsWith(\"http\")?img.url:\"\".concat(API_BASE).concat(img.url);return/*#__PURE__*/_jsxs(\"div\",{className:\"relative group cursor-pointer overflow-hidden rounded-3xl shadow-lg transition-transform duration-500 hover:scale-105 hover:shadow-2xl\",style:{aspectRatio:\"1 / 1\"},onClick:()=>setSelectedImage(imageUrl),children:[/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:img.title||\"Gallery \".concat(idx+1),className:\"w-full h-full object-cover rounded-3xl transition-transform duration-500 group-hover:scale-110 filter brightness-90 group-hover:brightness-100\",onError:e=>e.target.src=\"/fallback.png\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity duration-500\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-white text-center font-bold text-lg px-2\",children:img.title||\"View Image\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 rounded-3xl border-2 border-green-400 border-dashed opacity-0 group-hover:opacity-100 animate-pulse\"})]},idx);})}),selectedImage&&/*#__PURE__*/_jsx(GalleryModal,{image:selectedImage,onClose:()=>setSelectedImage(null)})]});};export default Gallery;","map":{"version":3,"names":["React","useEffect","useState","GalleryModal","axios","jsx","_jsx","jsxs","_jsxs","Gallery","images","setImages","selectedImage","setSelectedImage","loading","setLoading","error","setError","API_BASE","process","env","REACT_APP_API_URL","fetchGallery","res","get","concat","data","Array","isArray","safeImages","map","img","_objectSpread","url","encodeURI","err","console","className","children","length","idx","imageUrl","startsWith","style","aspectRatio","onClick","src","alt","title","onError","e","target","image","onClose"],"sources":["C:/Users/murug/OneDrive/Desktop/uk-portal/client/src/pages/Gallery.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport GalleryModal from \"../components/GalleryModal\";\nimport axios from \"axios\";\n\nconst Gallery = () => {\n  const [images, setImages] = useState([]);\n  const [selectedImage, setSelectedImage] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Use environment variable if set, else fallback to localhost\n  const API_BASE = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\n\n  useEffect(() => {\n    const fetchGallery = async () => {\n      try {\n        const res = await axios.get(`${API_BASE}/api/admin/gallery`);\n        if (res.data && Array.isArray(res.data)) {\n          // Make sure URLs are properly encoded\n          const safeImages = res.data.map((img) => ({\n            ...img,\n            url: img.url ? encodeURI(img.url) : \"/fallback.png\",\n          }));\n          setImages(safeImages);\n        } else {\n          setImages([]);\n        }\n      } catch (err) {\n        console.error(\"Error fetching gallery:\", err);\n        setError(\"‚ö†Ô∏è Failed to load gallery. Please try again later.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchGallery();\n  }, [API_BASE]);\n\n  if (loading)\n    return (\n      <div className=\"p-8 text-center text-lg font-semibold animate-pulse\">\n        ‚è≥ Loading gallery...\n      </div>\n    );\n\n  if (error)\n    return (\n      <div className=\"p-8 text-center text-red-600 font-semibold\">{error}</div>\n    );\n\n  return (\n    <div className=\"p-6 max-w-7xl mx-auto\">\n      <h2 className=\"text-4xl font-bold mb-12 text-center text-green-700 animate-fadeIn\">\n        üå∏ Village Photo Gallery\n      </h2>\n\n      {images.length === 0 ? (\n        <p className=\"text-gray-600 text-lg text-center\">\n          No images available in the gallery.\n        </p>\n      ) : (\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6\">\n          {images.map((img, idx) => {\n            // Use absolute URL for image\n            const imageUrl = img.url.startsWith(\"http\")\n              ? img.url\n              : `${API_BASE}${img.url}`;\n\n            return (\n              <div\n                key={idx}\n                className=\"relative group cursor-pointer overflow-hidden rounded-3xl shadow-lg transition-transform duration-500 hover:scale-105 hover:shadow-2xl\"\n                style={{ aspectRatio: \"1 / 1\" }}\n                onClick={() => setSelectedImage(imageUrl)}\n              >\n                <img\n                  src={imageUrl}\n                  alt={img.title || `Gallery ${idx + 1}`}\n                  className=\"w-full h-full object-cover rounded-3xl transition-transform duration-500 group-hover:scale-110 filter brightness-90 group-hover:brightness-100\"\n                  onError={(e) => (e.target.src = \"/fallback.png\")}\n                />\n                <div className=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity duration-500\">\n                  <h3 className=\"text-white text-center font-bold text-lg px-2\">\n                    {img.title || \"View Image\"}\n                  </h3>\n                </div>\n                <div className=\"absolute inset-0 rounded-3xl border-2 border-green-400 border-dashed opacity-0 group-hover:opacity-100 animate-pulse\"></div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n\n      {selectedImage && (\n        <GalleryModal image={selectedImage} onClose={() => setSelectedImage(null)} />\n      )}\n    </div>\n  );\n};\n\nexport default Gallery;\n"],"mappings":"qIAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,YAAY,KAAM,4BAA4B,CACrD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CACpB,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACU,aAAa,CAAEC,gBAAgB,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAExC;AACA,KAAM,CAAAgB,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,uBAAuB,CAEzEpB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAnB,KAAK,CAACoB,GAAG,IAAAC,MAAA,CAAIP,QAAQ,sBAAoB,CAAC,CAC5D,GAAIK,GAAG,CAACG,IAAI,EAAIC,KAAK,CAACC,OAAO,CAACL,GAAG,CAACG,IAAI,CAAC,CAAE,CACvC;AACA,KAAM,CAAAG,UAAU,CAAGN,GAAG,CAACG,IAAI,CAACI,GAAG,CAAEC,GAAG,EAAAC,aAAA,CAAAA,aAAA,IAC/BD,GAAG,MACNE,GAAG,CAAEF,GAAG,CAACE,GAAG,CAAGC,SAAS,CAACH,GAAG,CAACE,GAAG,CAAC,CAAG,eAAe,EACnD,CAAC,CACHtB,SAAS,CAACkB,UAAU,CAAC,CACvB,CAAC,IAAM,CACLlB,SAAS,CAAC,EAAE,CAAC,CACf,CACF,CAAE,MAAOwB,GAAG,CAAE,CACZC,OAAO,CAACpB,KAAK,CAAC,yBAAyB,CAAEmB,GAAG,CAAC,CAC7ClB,QAAQ,CAAC,oDAAoD,CAAC,CAChE,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDO,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACJ,QAAQ,CAAC,CAAC,CAEd,GAAIJ,OAAO,CACT,mBACER,IAAA,QAAK+B,SAAS,CAAC,qDAAqD,CAAAC,QAAA,CAAC,2BAErE,CAAK,CAAC,CAGV,GAAItB,KAAK,CACP,mBACEV,IAAA,QAAK+B,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CAAEtB,KAAK,CAAM,CAAC,CAG7E,mBACER,KAAA,QAAK6B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpChC,IAAA,OAAI+B,SAAS,CAAC,oEAAoE,CAAAC,QAAA,CAAC,oCAEnF,CAAI,CAAC,CAEJ5B,MAAM,CAAC6B,MAAM,GAAK,CAAC,cAClBjC,IAAA,MAAG+B,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,qCAEjD,CAAG,CAAC,cAEJhC,IAAA,QAAK+B,SAAS,CAAC,qEAAqE,CAAAC,QAAA,CACjF5B,MAAM,CAACoB,GAAG,CAAC,CAACC,GAAG,CAAES,GAAG,GAAK,CACxB;AACA,KAAM,CAAAC,QAAQ,CAAGV,GAAG,CAACE,GAAG,CAACS,UAAU,CAAC,MAAM,CAAC,CACvCX,GAAG,CAACE,GAAG,IAAAR,MAAA,CACJP,QAAQ,EAAAO,MAAA,CAAGM,GAAG,CAACE,GAAG,CAAE,CAE3B,mBACEzB,KAAA,QAEE6B,SAAS,CAAC,wIAAwI,CAClJM,KAAK,CAAE,CAAEC,WAAW,CAAE,OAAQ,CAAE,CAChCC,OAAO,CAAEA,CAAA,GAAMhC,gBAAgB,CAAC4B,QAAQ,CAAE,CAAAH,QAAA,eAE1ChC,IAAA,QACEwC,GAAG,CAAEL,QAAS,CACdM,GAAG,CAAEhB,GAAG,CAACiB,KAAK,aAAAvB,MAAA,CAAee,GAAG,CAAG,CAAC,CAAG,CACvCH,SAAS,CAAC,gJAAgJ,CAC1JY,OAAO,CAAGC,CAAC,EAAMA,CAAC,CAACC,MAAM,CAACL,GAAG,CAAG,eAAiB,CAClD,CAAC,cACFxC,IAAA,QAAK+B,SAAS,CAAC,4IAA4I,CAAAC,QAAA,cACzJhC,IAAA,OAAI+B,SAAS,CAAC,+CAA+C,CAAAC,QAAA,CAC1DP,GAAG,CAACiB,KAAK,EAAI,YAAY,CACxB,CAAC,CACF,CAAC,cACN1C,IAAA,QAAK+B,SAAS,CAAC,sHAAsH,CAAM,CAAC,GAhBvIG,GAiBF,CAAC,CAEV,CAAC,CAAC,CACC,CACN,CAEA5B,aAAa,eACZN,IAAA,CAACH,YAAY,EAACiD,KAAK,CAAExC,aAAc,CAACyC,OAAO,CAAEA,CAAA,GAAMxC,gBAAgB,CAAC,IAAI,CAAE,CAAE,CAC7E,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAJ,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}