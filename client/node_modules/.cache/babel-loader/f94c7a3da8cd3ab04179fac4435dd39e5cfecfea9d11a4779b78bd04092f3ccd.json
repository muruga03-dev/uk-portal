{"ast":null,"code":"import _objectSpread from\"C:/Users/murug/OneDrive/Desktop/uk-portal/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// client/src/pages/AdminDashboard.jsx\nimport React,{useEffect,useMemo,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboard=()=>{const API_BASE=process.env.REACT_APP_API_URL||\"http://localhost:5000\";const token=localStorage.getItem(\"adminToken\");const headers={Authorization:\"Bearer \".concat(token)};// ---------- State ----------\nconst[families,setFamilies]=useState([]);const[events,setEvents]=useState([]);const[workers,setWorkers]=useState([]);const[historyItems,setHistoryItems]=useState([]);const[gallery,setGallery]=useState([]);const[loading,setLoading]=useState(false);const[errorMsg,setErrorMsg]=useState(\"\");// family form\nconst[newFamily,setNewFamily]=useState({familyId:\"\",leaderName:\"\",email:\"\",password:\"\",members:\"\",phone:\"\",address:\"\"});// tax form / selection\nconst[selectedFamilies,setSelectedFamilies]=useState([]);const[selectAll,setSelectAll]=useState(false);const[taxMonth,setTaxMonth]=useState(()=>{const d=new Date();return\"\".concat(d.getFullYear(),\"-\").concat(String(d.getMonth()+1).padStart(2,\"0\"));// YYYY-MM\n});const[taxAmount,setTaxAmount]=useState(\"\");const[taxPaid,setTaxPaid]=useState(false);// gallery form\nconst[galleryFile,setGalleryFile]=useState(null);const[galleryMeta,setGalleryMeta]=useState({title:\"\",description:\"\"});// event/worker/history forms\nconst[newEvent,setNewEvent]=useState({title:\"\",date:\"\"});const[newWorker,setNewWorker]=useState({type:\"\",description:\"\"});const[newHistory,setNewHistory]=useState({contentEN:\"\",contentTA:\"\"});// UI helpers\nconst[searchFamily,setSearchFamily]=useState(\"\");// ---------- Load all data ----------\nconst loadAll=async()=>{try{setLoading(true);const[fRes,eRes,wRes,hRes,gRes]=await Promise.all([axios.get(\"\".concat(API_BASE,\"/api/admin/families\"),{headers}),axios.get(\"\".concat(API_BASE,\"/api/admin/events\"),{headers}),axios.get(\"\".concat(API_BASE,\"/api/admin/workers\"),{headers}),axios.get(\"\".concat(API_BASE,\"/api/admin/history\"),{headers}),axios.get(\"\".concat(API_BASE,\"/api/admin/gallery\"),{headers})]);setFamilies(fRes.data||[]);setEvents(eRes.data||[]);setWorkers(wRes.data||[]);setHistoryItems(hRes.data||[]);setGallery(gRes.data||[]);}catch(err){console.error(\"LoadAll error:\",err);setErrorMsg(\"Failed to load admin data.\");}finally{setLoading(false);}};useEffect(()=>{if(!token)return setErrorMsg(\"No admin token. Please login.\");loadAll();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[token]);// ---------- Family CRUD / approve ----------\nconst createFamily=async()=>{if(!newFamily.familyId||!newFamily.password||!newFamily.leaderName||!newFamily.email){return alert(\"Family ID, Leader Name, Email, Password required\");}try{setLoading(true);const body={familyId:newFamily.familyId,leaderName:newFamily.leaderName,email:newFamily.email,password:newFamily.password,members:newFamily.members?newFamily.members.split(\",\").map(s=>s.trim()):[],phone:newFamily.phone,address:newFamily.address};await axios.post(\"\".concat(API_BASE,\"/api/admin/families\"),body,{headers});setNewFamily({familyId:\"\",leaderName:\"\",email:\"\",password:\"\",members:\"\",phone:\"\",address:\"\"});await loadAll();}catch(err){var _err$response,_err$response$data;console.error(\"createFamily:\",err.response||err);alert(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to create family\");}finally{setLoading(false);}};const approveFamily=async function(id){let approve=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;try{setLoading(true);const endpoint=approve?\"/families/approve\":\"/families/reject\";await axios.post(\"\".concat(API_BASE,\"/api/admin\").concat(endpoint),{id},{headers});await loadAll();}catch(err){console.error(\"approveFamily:\",err.response||err);}finally{setLoading(false);}};// ---------- Tax: selection helpers ----------\nconst toggleSelectFamily=id=>{setSelectedFamilies(prev=>prev.includes(id)?prev.filter(x=>x!==id):[...prev,id]);};const toggleSelectAll=()=>{if(selectAll){setSelectedFamilies([]);setSelectAll(false);}else{setSelectedFamilies(families.map(f=>f._id));setSelectAll(true);}};// ---------- Add tax (bulk) ----------\nconst addTaxBulk=async()=>{if(!taxMonth||!taxAmount)return alert(\"Month and amount required\");if(!selectedFamilies.length)return alert(\"Please select at least one family\");try{setLoading(true);// backend expects: { familyIds: [...], taxAmount, month, paid }\nawait axios.post(\"\".concat(API_BASE,\"/api/admin/families/tax/bulk\"),{familyIds:selectedFamilies,taxAmount,month:taxMonth,paid:taxPaid||false},{headers});// reflect in UI without full reload: update local families list\nsetFamilies(prev=>prev.map(f=>{if(selectedFamilies.includes(f._id)){const taxHistory=f.taxHistory?[...f.taxHistory]:[];taxHistory.push({month:taxMonth,amount:taxAmount,paid:!!taxPaid,uploadedAt:new Date().toISOString()});return _objectSpread(_objectSpread({},f),{},{taxHistory});}return f;}));// reset selectors\nsetSelectedFamilies([]);setSelectAll(false);setTaxAmount(\"\");setTaxPaid(false);alert(\"Tax added to selected families\");}catch(err){var _err$response2,_err$response2$data;console.error(\"addTaxBulk:\",err.response||err);alert(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Failed to add tax\");}finally{setLoading(false);}};// ---------- Mark single family's tax as paid for selected month ----------\n// Backend: expects an endpoint to mark paid - we call PATCH /api/admin/families/:id/tax\nconst markFamilyTaxPaid=async(familyId,month)=>{try{setLoading(true);await axios.patch(\"\".concat(API_BASE,\"/api/admin/families/\").concat(familyId,\"/tax\"),{month,paid:true},{headers});// Update local state immediately\nsetFamilies(prev=>prev.map(f=>{if(f._id!==familyId)return f;const taxHistory=f.taxHistory?f.taxHistory.map(t=>t.month===month?_objectSpread(_objectSpread({},t),{},{paid:true}):t):[{month,amount:0,paid:true}];return _objectSpread(_objectSpread({},f),{},{taxHistory});}));}catch(err){var _err$response3,_err$response3$data;console.error(\"markFamilyTaxPaid:\",err.response||err);alert(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||\"Failed to mark paid\");}finally{setLoading(false);}};// ---------- Send notifications (calls API to send SMS/WhatsApp or email) ----------\nconst sendNotifications=async()=>{if(!window.confirm(\"Send notification to all families?\"))return;try{setLoading(true);await axios.post(\"\".concat(API_BASE,\"/api/admin/families/notify\"),{},{headers});alert(\"Notifications queued/sent (backend handles sending).\");}catch(err){console.error(\"sendNotifications:\",err.response||err);alert(\"Failed to send notifications\");}finally{setLoading(false);}};// ---------- Events/Workers/History CRUD ----------\nconst addEvent=async()=>{if(!newEvent.title||!newEvent.date)return alert(\"Title & date required\");try{setLoading(true);await axios.post(\"\".concat(API_BASE,\"/api/admin/events\"),newEvent,{headers});setNewEvent({title:\"\",date:\"\"});await loadAll();}catch(err){console.error(\"addEvent:\",err.response||err);}finally{setLoading(false);}};const deleteEvent=async id=>{if(!window.confirm(\"Delete event?\"))return;try{setLoading(true);await axios.delete(\"\".concat(API_BASE,\"/api/admin/events/\").concat(id),{headers});await loadAll();}catch(err){console.error(\"deleteEvent:\",err.response||err);}finally{setLoading(false);}};const addWorker=async()=>{if(!newWorker.type)return alert(\"Worker type required\");try{setLoading(true);await axios.post(\"\".concat(API_BASE,\"/api/admin/workers\"),newWorker,{headers});setNewWorker({type:\"\",description:\"\"});await loadAll();}catch(err){console.error(\"addWorker:\",err.response||err);}finally{setLoading(false);}};const deleteWorker=async id=>{if(!window.confirm(\"Delete worker?\"))return;try{setLoading(true);await axios.delete(\"\".concat(API_BASE,\"/api/admin/workers/\").concat(id),{headers});await loadAll();}catch(err){console.error(err);}finally{setLoading(false);}};const addHistory=async()=>{if(!newHistory.contentEN&&!newHistory.contentTA)return alert(\"Enter history content\");try{setLoading(true);await axios.post(\"\".concat(API_BASE,\"/api/admin/history\"),{content:{en:newHistory.contentEN,ta:newHistory.contentTA}},{headers});setNewHistory({contentEN:\"\",contentTA:\"\"});await loadAll();}catch(err){console.error(\"addHistory:\",err.response||err);}finally{setLoading(false);}};const deleteHistory=async id=>{if(!window.confirm(\"Delete history entry?\"))return;try{setLoading(true);await axios.delete(\"\".concat(API_BASE,\"/api/admin/history/\").concat(id),{headers});await loadAll();}catch(err){console.error(err);}finally{setLoading(false);}};// ---------- Gallery upload/delete ----------\nconst uploadGallery=async()=>{if(!galleryFile)return alert(\"Select file\");try{setLoading(true);const fd=new FormData();// IMPORTANT: backend multer config expects field name \"image\"\nfd.append(\"image\",galleryFile);fd.append(\"title\",galleryMeta.title||\"Untitled\");fd.append(\"description\",galleryMeta.description||\"\");await axios.post(\"\".concat(API_BASE,\"/api/admin/gallery/upload\"),fd,{headers:_objectSpread(_objectSpread({},headers),{},{\"Content-Type\":\"multipart/form-data\"})});setGalleryFile(null);setGalleryMeta({title:\"\",description:\"\"});await loadAll();alert(\"Uploaded\");}catch(err){console.error(\"uploadGallery:\",err.response||err);alert(\"Failed to upload\");}finally{setLoading(false);}};const deleteGallery=async id=>{if(!window.confirm(\"Delete gallery item?\"))return;try{setLoading(true);await axios.delete(\"\".concat(API_BASE,\"/api/admin/gallery/\").concat(id),{headers});await loadAll();}catch(err){console.error(\"deleteGallery:\",err.response||err);}finally{setLoading(false);}};// ---------- Derived lists for the selected month ----------\nconst familiesFiltered=useMemo(()=>{if(!searchFamily)return families;const q=searchFamily.toLowerCase();return families.filter(f=>(f.familyId+\"|\"+f.leaderName+\"|\"+(f.email||\"\")).toLowerCase().includes(q));},[families,searchFamily]);const paidForSelectedMonth=useMemo(()=>{return families.filter(f=>{var _f$taxHistory;return(_f$taxHistory=f.taxHistory)===null||_f$taxHistory===void 0?void 0:_f$taxHistory.some(t=>t.month===taxMonth&&t.paid);});},[families,taxMonth]);const unpaidForSelectedMonth=useMemo(()=>{return families.filter(f=>{var _f$taxHistory2;// if taxHistory contains month and not paid => unpaid\nconst t=(_f$taxHistory2=f.taxHistory)===null||_f$taxHistory2===void 0?void 0:_f$taxHistory2.find(x=>x.month===taxMonth);return t&&!t.paid||!t;// treat missing entry as unpaid (so admin can add)\n});},[families,taxMonth]);const totalPaidThisMonth=useMemo(()=>{return paidForSelectedMonth.reduce((sum,f)=>{var _f$taxHistory3;const t=(_f$taxHistory3=f.taxHistory)===null||_f$taxHistory3===void 0?void 0:_f$taxHistory3.find(x=>x.month===taxMonth&&x.paid);return sum+(t?Number(t.amount||0):0);},0);},[paidForSelectedMonth,taxMonth]);// ---------- small helper to extract display amount ----------\nconst displayTaxAmount=(f,month)=>{var _f$taxHistory4;const t=(_f$taxHistory4=f.taxHistory)===null||_f$taxHistory4===void 0?void 0:_f$taxHistory4.find(x=>x.month===month);return t?t.amount:\"-\";};// ---------- Render ----------\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 md:p-6 max-w-7xl mx-auto space-y-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-center mb-4\",children:\"Admin Dashboard\"}),errorMsg&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-600 text-center\",children:errorMsg}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-blue-600\",children:\"Processing...\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"p-4 border rounded space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:\"Families\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{value:searchFamily,onChange:e=>setSearchFamily(e.target.value),placeholder:\"Search families...\",className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"button\",{onClick:loadAll,className:\"bg-gray-200 px-3 py-1 rounded\",children:\"Refresh\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendNotifications,className:\"bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded\",children:\"Send Notifications\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-4 md:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-3 rounded shadow\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2\",children:\"Create Family\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-2 md:grid-cols-2\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Family ID\",value:newFamily.familyId,onChange:e=>setNewFamily(_objectSpread(_objectSpread({},newFamily),{},{familyId:e.target.value})),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Leader name\",value:newFamily.leaderName,onChange:e=>setNewFamily(_objectSpread(_objectSpread({},newFamily),{},{leaderName:e.target.value})),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Email\",value:newFamily.email,onChange:e=>setNewFamily(_objectSpread(_objectSpread({},newFamily),{},{email:e.target.value})),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Password\",value:newFamily.password,onChange:e=>setNewFamily(_objectSpread(_objectSpread({},newFamily),{},{password:e.target.value})),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Members (comma separated)\",value:newFamily.members,onChange:e=>setNewFamily(_objectSpread(_objectSpread({},newFamily),{},{members:e.target.value})),className:\"border px-2 py-1 rounded md:col-span-2\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Phone\",value:newFamily.phone,onChange:e=>setNewFamily(_objectSpread(_objectSpread({},newFamily),{},{phone:e.target.value})),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Address\",value:newFamily.address,onChange:e=>setNewFamily(_objectSpread(_objectSpread({},newFamily),{},{address:e.target.value})),className:\"border px-2 py-1 rounded\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:createFamily,className:\"bg-green-600 text-white px-3 py-1 rounded\",children:\"Create\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 h-72 overflow-auto border rounded p-2 bg-white\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-100 sticky top-0\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-2 border\",children:\"Sel\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 border\",children:\"Family ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 border\",children:\"Leader\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 border\",children:\"Approved\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 border\",children:\"Latest Tax\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 border\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:familiesFiltered.map(f=>{var _f$taxHistory5;const latest=(_f$taxHistory5=f.taxHistory)!==null&&_f$taxHistory5!==void 0&&_f$taxHistory5.length?f.taxHistory[f.taxHistory.length-1]:null;return/*#__PURE__*/_jsxs(\"tr\",{className:\"even:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-2 border text-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedFamilies.includes(f._id),onChange:()=>toggleSelectFamily(f._id)})}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 border\",children:f.familyId}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 border\",children:f.leaderName}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 border\",children:f.approved?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 border\",children:latest?\"\".concat(latest.month,\" - \").concat(latest.amount,\" (\").concat(latest.paid?\"Paid\":\"Unpaid\",\")\"):\"No Tax\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-2 border space-x-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>approveFamily(f._id,true),className:\"bg-green-500 text-white px-2 py-1 rounded text-xs\",children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>approveFamily(f._id,false),className:\"bg-red-500 text-white px-2 py-1 rounded text-xs\",children:\"Reject\"})]})]},f._id);})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-3 rounded shadow\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2\",children:\"Add Tax (Bulk)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-2 items-center\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectAll,onChange:toggleSelectAll}),\" Select All\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mb-1\",children:\"Manual select (scroll families left column)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"month\",value:taxMonth,onChange:e=>setTaxMonth(e.target.value),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Amount\",value:taxAmount,onChange:e=>setTaxAmount(e.target.value),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:taxPaid,onChange:e=>setTaxPaid(e.target.checked)}),\" Mark as Paid\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:addTaxBulk,className:\"bg-green-600 text-white px-3 py-1 rounded\",children:\"Add Tax\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold\",children:[\"Selected month: \",taxMonth]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[\"Total paid this month: \",/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u20B9\",totalPaidThisMonth]})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-3 rounded shadow\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold mb-2\",children:[\"Paid Families (\",paidForSelectedMonth.length,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-h-48 overflow-auto\",children:[paidForSelectedMonth.map(f=>{const t=f.taxHistory.find(x=>x.month===taxMonth&&x.paid);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-1 border-b\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium\",children:[f.familyId,\" \\u2014 \",f.leaderName]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"\\u20B9\",t===null||t===void 0?void 0:t.amount,\" \\u2022 \",t===null||t===void 0?void 0:t.month]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-green-600\",children:\"Paid\"})]},f._id);}),paidForSelectedMonth.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"No paid families for selected month.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-3 rounded shadow\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold mb-2\",children:[\"Pending Families (\",unpaidForSelectedMonth.length,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-h-48 overflow-auto\",children:[unpaidForSelectedMonth.map(f=>{var _f$taxHistory6;const t=(_f$taxHistory6=f.taxHistory)===null||_f$taxHistory6===void 0?void 0:_f$taxHistory6.find(x=>x.month===taxMonth);const amount=t?t.amount:taxAmount||\"-\";const paidFlag=t?t.paid:false;// Show only unpaid or missing entries\nif(paidFlag)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-1 border-b\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium\",children:[f.familyId,\" \\u2014 \",f.leaderName]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"Amount: \\u20B9\",amount,\" \\u2022 \",t?t.month:taxMonth]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col items-end gap-1\",children:/*#__PURE__*/_jsx(\"button\",{className:\"text-sm bg-blue-600 text-white px-2 py-1 rounded\",onClick:()=>markFamilyTaxPaid(f._id,taxMonth),children:\"Mark Paid\"})})]},f._id);}),unpaidForSelectedMonth.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"No pending families for selected month.\"})]})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"grid gap-4 md:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2\",children:\"Events\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:events.map(ev=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[ev.title,\" \\u2022 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:new Date(ev.date).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteEvent(ev._id),className:\"text-red-600 underline\",children:\"Delete\"})]},ev._id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Title\",value:newEvent.title,onChange:e=>setNewEvent(_objectSpread(_objectSpread({},newEvent),{},{title:e.target.value})),className:\"border px-2 py-1 rounded flex-1\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:newEvent.date,onChange:e=>setNewEvent(_objectSpread(_objectSpread({},newEvent),{},{date:e.target.value})),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addEvent,className:\"bg-green-600 text-white px-3 py-1 rounded\",children:\"Add\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2\",children:\"Workers\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:workers.map(w=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:w.type}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:w.description})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteWorker(w._id),className:\"text-red-600 underline\",children:\"Delete\"})]},w._id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 grid gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Work type\",value:newWorker.type,onChange:e=>setNewWorker(_objectSpread(_objectSpread({},newWorker),{},{type:e.target.value})),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Description\",value:newWorker.description,onChange:e=>setNewWorker(_objectSpread(_objectSpread({},newWorker),{},{description:e.target.value})),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addWorker,className:\"bg-green-600 text-white px-3 py-1 rounded\",children:\"Add Worker\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2\",children:\"History\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:historyItems.map(h=>{var _h$content,_h$content2;return/*#__PURE__*/_jsxs(\"li\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:((_h$content=h.content)===null||_h$content===void 0?void 0:_h$content.en)||((_h$content2=h.content)===null||_h$content2===void 0?void 0:_h$content2.ta)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteHistory(h._id),className:\"text-red-600 underline\",children:\"Delete\"})]},h._id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 grid gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Content (EN)\",value:newHistory.contentEN,onChange:e=>setNewHistory(_objectSpread(_objectSpread({},newHistory),{},{contentEN:e.target.value})),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Content (TA)\",value:newHistory.contentTA,onChange:e=>setNewHistory(_objectSpread(_objectSpread({},newHistory),{},{contentTA:e.target.value})),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addHistory,className:\"bg-green-600 text-white px-3 py-1 rounded\",children:\"Add\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2\",children:\"Gallery (Photos & Videos)\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:gallery.map(g=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:g.title}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:g.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"\".concat(API_BASE).concat(g.url),target:\"_blank\",rel:\"noreferrer\",className:\"text-blue-600 underline\",children:\"View\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteGallery(g._id),className:\"text-red-600 underline\",children:\"Delete\"})]})]},g._id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 grid gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>setGalleryFile(e.target.files[0]),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Title\",value:galleryMeta.title,onChange:e=>setGalleryMeta(_objectSpread(_objectSpread({},galleryMeta),{},{title:e.target.value})),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Description\",value:galleryMeta.description,onChange:e=>setGalleryMeta(_objectSpread(_objectSpread({},galleryMeta),{},{description:e.target.value})),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"button\",{onClick:uploadGallery,className:\"bg-green-600 text-white px-3 py-1 rounded\",children:\"Upload\"})]})]})]})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useEffect","useMemo","useState","axios","jsx","_jsx","jsxs","_jsxs","AdminDashboard","API_BASE","process","env","REACT_APP_API_URL","token","localStorage","getItem","headers","Authorization","concat","families","setFamilies","events","setEvents","workers","setWorkers","historyItems","setHistoryItems","gallery","setGallery","loading","setLoading","errorMsg","setErrorMsg","newFamily","setNewFamily","familyId","leaderName","email","password","members","phone","address","selectedFamilies","setSelectedFamilies","selectAll","setSelectAll","taxMonth","setTaxMonth","d","Date","getFullYear","String","getMonth","padStart","taxAmount","setTaxAmount","taxPaid","setTaxPaid","galleryFile","setGalleryFile","galleryMeta","setGalleryMeta","title","description","newEvent","setNewEvent","date","newWorker","setNewWorker","type","newHistory","setNewHistory","contentEN","contentTA","searchFamily","setSearchFamily","loadAll","fRes","eRes","wRes","hRes","gRes","Promise","all","get","data","err","console","error","createFamily","alert","body","split","map","s","trim","post","_err$response","_err$response$data","response","message","approveFamily","id","approve","arguments","length","undefined","endpoint","toggleSelectFamily","prev","includes","filter","x","toggleSelectAll","f","_id","addTaxBulk","familyIds","month","paid","taxHistory","push","amount","uploadedAt","toISOString","_objectSpread","_err$response2","_err$response2$data","markFamilyTaxPaid","patch","t","_err$response3","_err$response3$data","sendNotifications","window","confirm","addEvent","deleteEvent","delete","addWorker","deleteWorker","addHistory","content","en","ta","deleteHistory","uploadGallery","fd","FormData","append","deleteGallery","familiesFiltered","q","toLowerCase","paidForSelectedMonth","_f$taxHistory","some","unpaidForSelectedMonth","_f$taxHistory2","find","totalPaidThisMonth","reduce","sum","_f$taxHistory3","Number","displayTaxAmount","_f$taxHistory4","className","children","value","onChange","e","target","placeholder","onClick","_f$taxHistory5","latest","checked","approved","_f$taxHistory6","paidFlag","ev","toLocaleDateString","w","h","_h$content","_h$content2","g","href","url","rel","files"],"sources":["C:/Users/murug/OneDrive/Desktop/uk-portal/client/src/pages/AdminDashboard.jsx"],"sourcesContent":["// client/src/pages/AdminDashboard.jsx\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport axios from \"axios\";\n\nconst AdminDashboard = () => {\n  const API_BASE = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\n  const token = localStorage.getItem(\"adminToken\");\n  const headers = { Authorization: `Bearer ${token}` };\n\n  // ---------- State ----------\n  const [families, setFamilies] = useState([]);\n  const [events, setEvents] = useState([]);\n  const [workers, setWorkers] = useState([]);\n  const [historyItems, setHistoryItems] = useState([]);\n  const [gallery, setGallery] = useState([]);\n\n  const [loading, setLoading] = useState(false);\n  const [errorMsg, setErrorMsg] = useState(\"\");\n\n  // family form\n  const [newFamily, setNewFamily] = useState({\n    familyId: \"\",\n    leaderName: \"\",\n    email: \"\",\n    password: \"\",\n    members: \"\",\n    phone: \"\",\n    address: \"\",\n  });\n\n  // tax form / selection\n  const [selectedFamilies, setSelectedFamilies] = useState([]);\n  const [selectAll, setSelectAll] = useState(false);\n  const [taxMonth, setTaxMonth] = useState(() => {\n    const d = new Date();\n    return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, \"0\")}`; // YYYY-MM\n  });\n  const [taxAmount, setTaxAmount] = useState(\"\");\n  const [taxPaid, setTaxPaid] = useState(false);\n\n  // gallery form\n  const [galleryFile, setGalleryFile] = useState(null);\n  const [galleryMeta, setGalleryMeta] = useState({ title: \"\", description: \"\" });\n\n  // event/worker/history forms\n  const [newEvent, setNewEvent] = useState({ title: \"\", date: \"\" });\n  const [newWorker, setNewWorker] = useState({ type: \"\", description: \"\" });\n  const [newHistory, setNewHistory] = useState({ contentEN: \"\", contentTA: \"\" });\n\n  // UI helpers\n  const [searchFamily, setSearchFamily] = useState(\"\");\n\n  // ---------- Load all data ----------\n  const loadAll = async () => {\n    try {\n      setLoading(true);\n      const [fRes, eRes, wRes, hRes, gRes] = await Promise.all([\n        axios.get(`${API_BASE}/api/admin/families`, { headers }),\n        axios.get(`${API_BASE}/api/admin/events`, { headers }),\n        axios.get(`${API_BASE}/api/admin/workers`, { headers }),\n        axios.get(`${API_BASE}/api/admin/history`, { headers }),\n        axios.get(`${API_BASE}/api/admin/gallery`, { headers }),\n      ]);\n      setFamilies(fRes.data || []);\n      setEvents(eRes.data || []);\n      setWorkers(wRes.data || []);\n      setHistoryItems(hRes.data || []);\n      setGallery(gRes.data || []);\n    } catch (err) {\n      console.error(\"LoadAll error:\", err);\n      setErrorMsg(\"Failed to load admin data.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!token) return setErrorMsg(\"No admin token. Please login.\");\n    loadAll();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [token]);\n\n  // ---------- Family CRUD / approve ----------\n  const createFamily = async () => {\n    if (!newFamily.familyId || !newFamily.password || !newFamily.leaderName || !newFamily.email) {\n      return alert(\"Family ID, Leader Name, Email, Password required\");\n    }\n    try {\n      setLoading(true);\n      const body = {\n        familyId: newFamily.familyId,\n        leaderName: newFamily.leaderName,\n        email: newFamily.email,\n        password: newFamily.password,\n        members: newFamily.members ? newFamily.members.split(\",\").map(s => s.trim()) : [],\n        phone: newFamily.phone,\n        address: newFamily.address,\n      };\n      await axios.post(`${API_BASE}/api/admin/families`, body, { headers });\n      setNewFamily({ familyId: \"\", leaderName: \"\", email: \"\", password: \"\", members: \"\", phone: \"\", address: \"\" });\n      await loadAll();\n    } catch (err) {\n      console.error(\"createFamily:\", err.response || err);\n      alert(err.response?.data?.message || \"Failed to create family\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const approveFamily = async (id, approve = true) => {\n    try {\n      setLoading(true);\n      const endpoint = approve ? \"/families/approve\" : \"/families/reject\";\n      await axios.post(`${API_BASE}/api/admin${endpoint}`, { id }, { headers });\n      await loadAll();\n    } catch (err) {\n      console.error(\"approveFamily:\", err.response || err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ---------- Tax: selection helpers ----------\n  const toggleSelectFamily = (id) => {\n    setSelectedFamilies(prev => prev.includes(id) ? prev.filter(x => x !== id) : [...prev, id]);\n  };\n\n  const toggleSelectAll = () => {\n    if (selectAll) {\n      setSelectedFamilies([]);\n      setSelectAll(false);\n    } else {\n      setSelectedFamilies(families.map(f => f._id));\n      setSelectAll(true);\n    }\n  };\n\n  // ---------- Add tax (bulk) ----------\n  const addTaxBulk = async () => {\n    if (!taxMonth || !taxAmount) return alert(\"Month and amount required\");\n    if (!selectedFamilies.length) return alert(\"Please select at least one family\");\n\n    try {\n      setLoading(true);\n      // backend expects: { familyIds: [...], taxAmount, month, paid }\n      await axios.post(`${API_BASE}/api/admin/families/tax/bulk`, {\n        familyIds: selectedFamilies,\n        taxAmount,\n        month: taxMonth,\n        paid: taxPaid || false,\n      }, { headers });\n\n      // reflect in UI without full reload: update local families list\n      setFamilies(prev => prev.map(f => {\n        if (selectedFamilies.includes(f._id)) {\n          const taxHistory = f.taxHistory ? [...f.taxHistory] : [];\n          taxHistory.push({ month: taxMonth, amount: taxAmount, paid: !!taxPaid, uploadedAt: new Date().toISOString() });\n          return { ...f, taxHistory };\n        }\n        return f;\n      }));\n\n      // reset selectors\n      setSelectedFamilies([]);\n      setSelectAll(false);\n      setTaxAmount(\"\");\n      setTaxPaid(false);\n      alert(\"Tax added to selected families\");\n    } catch (err) {\n      console.error(\"addTaxBulk:\", err.response || err);\n      alert(err.response?.data?.message || \"Failed to add tax\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ---------- Mark single family's tax as paid for selected month ----------\n  // Backend: expects an endpoint to mark paid - we call PATCH /api/admin/families/:id/tax\n  const markFamilyTaxPaid = async (familyId, month) => {\n    try {\n      setLoading(true);\n      await axios.patch(`${API_BASE}/api/admin/families/${familyId}/tax`, { month, paid: true }, { headers });\n\n      // Update local state immediately\n      setFamilies(prev => prev.map(f => {\n        if (f._id !== familyId) return f;\n        const taxHistory = f.taxHistory ? f.taxHistory.map(t => t.month === month ? { ...t, paid: true } : t) : [{ month, amount: 0, paid: true }];\n        return { ...f, taxHistory };\n      }));\n    } catch (err) {\n      console.error(\"markFamilyTaxPaid:\", err.response || err);\n      alert(err.response?.data?.message || \"Failed to mark paid\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ---------- Send notifications (calls API to send SMS/WhatsApp or email) ----------\n  const sendNotifications = async () => {\n    if (!window.confirm(\"Send notification to all families?\")) return;\n    try {\n      setLoading(true);\n      await axios.post(`${API_BASE}/api/admin/families/notify`, {}, { headers });\n      alert(\"Notifications queued/sent (backend handles sending).\");\n    } catch (err) {\n      console.error(\"sendNotifications:\", err.response || err);\n      alert(\"Failed to send notifications\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ---------- Events/Workers/History CRUD ----------\n  const addEvent = async () => {\n    if (!newEvent.title || !newEvent.date) return alert(\"Title & date required\");\n    try {\n      setLoading(true);\n      await axios.post(`${API_BASE}/api/admin/events`, newEvent, { headers });\n      setNewEvent({ title: \"\", date: \"\" });\n      await loadAll();\n    } catch (err) {\n      console.error(\"addEvent:\", err.response || err);\n    } finally { setLoading(false); }\n  };\n\n  const deleteEvent = async (id) => {\n    if (!window.confirm(\"Delete event?\")) return;\n    try { setLoading(true); await axios.delete(`${API_BASE}/api/admin/events/${id}`, { headers }); await loadAll(); }\n    catch (err) { console.error(\"deleteEvent:\", err.response || err); } finally { setLoading(false); }\n  };\n\n  const addWorker = async () => {\n    if (!newWorker.type) return alert(\"Worker type required\");\n    try { setLoading(true); await axios.post(`${API_BASE}/api/admin/workers`, newWorker, { headers }); setNewWorker({ type: \"\", description: \"\" }); await loadAll(); }\n    catch (err) { console.error(\"addWorker:\", err.response || err); } finally { setLoading(false); }\n  };\n  const deleteWorker = async (id) => { if (!window.confirm(\"Delete worker?\")) return; try { setLoading(true); await axios.delete(`${API_BASE}/api/admin/workers/${id}`, { headers }); await loadAll(); } catch (err) { console.error(err); } finally { setLoading(false); } };\n\n  const addHistory = async () => {\n    if (!newHistory.contentEN && !newHistory.contentTA) return alert(\"Enter history content\");\n    try { setLoading(true); await axios.post(`${API_BASE}/api/admin/history`, { content: { en: newHistory.contentEN, ta: newHistory.contentTA } }, { headers }); setNewHistory({ contentEN: \"\", contentTA: \"\" }); await loadAll(); }\n    catch (err) { console.error(\"addHistory:\", err.response || err); } finally { setLoading(false); }\n  };\n  const deleteHistory = async (id) => { if (!window.confirm(\"Delete history entry?\")) return; try { setLoading(true); await axios.delete(`${API_BASE}/api/admin/history/${id}`, { headers }); await loadAll(); } catch (err) { console.error(err); } finally { setLoading(false); } };\n\n  // ---------- Gallery upload/delete ----------\n  const uploadGallery = async () => {\n    if (!galleryFile) return alert(\"Select file\");\n    try {\n      setLoading(true);\n      const fd = new FormData();\n      // IMPORTANT: backend multer config expects field name \"image\"\n      fd.append(\"image\", galleryFile);\n      fd.append(\"title\", galleryMeta.title || \"Untitled\");\n      fd.append(\"description\", galleryMeta.description || \"\");\n      await axios.post(`${API_BASE}/api/admin/gallery/upload`, fd, {\n        headers: { ...headers, \"Content-Type\": \"multipart/form-data\" },\n      });\n      setGalleryFile(null);\n      setGalleryMeta({ title: \"\", description: \"\" });\n      await loadAll();\n      alert(\"Uploaded\");\n    } catch (err) {\n      console.error(\"uploadGallery:\", err.response || err);\n      alert(\"Failed to upload\");\n    } finally { setLoading(false); }\n  };\n  const deleteGallery = async (id) => {\n    if (!window.confirm(\"Delete gallery item?\")) return;\n    try { setLoading(true); await axios.delete(`${API_BASE}/api/admin/gallery/${id}`, { headers }); await loadAll(); }\n    catch (err) { console.error(\"deleteGallery:\", err.response || err); } finally { setLoading(false); }\n  };\n\n  // ---------- Derived lists for the selected month ----------\n  const familiesFiltered = useMemo(() => {\n    if (!searchFamily) return families;\n    const q = searchFamily.toLowerCase();\n    return families.filter(f => (f.familyId + \"|\" + f.leaderName + \"|\" + (f.email||\"\")).toLowerCase().includes(q));\n  }, [families, searchFamily]);\n\n  const paidForSelectedMonth = useMemo(() => {\n    return families.filter(f => f.taxHistory?.some(t => t.month === taxMonth && t.paid));\n  }, [families, taxMonth]);\n\n  const unpaidForSelectedMonth = useMemo(() => {\n    return families.filter(f => {\n      // if taxHistory contains month and not paid => unpaid\n      const t = f.taxHistory?.find(x => x.month === taxMonth);\n      return (t && !t.paid) || (!t); // treat missing entry as unpaid (so admin can add)\n    });\n  }, [families, taxMonth]);\n\n  const totalPaidThisMonth = useMemo(() => {\n    return paidForSelectedMonth.reduce((sum, f) => {\n      const t = f.taxHistory?.find(x => x.month === taxMonth && x.paid);\n      return sum + (t ? Number(t.amount || 0) : 0);\n    }, 0);\n  }, [paidForSelectedMonth, taxMonth]);\n\n  // ---------- small helper to extract display amount ----------\n  const displayTaxAmount = (f, month) => {\n    const t = f.taxHistory?.find(x => x.month === month);\n    return t ? t.amount : \"-\";\n  };\n\n  // ---------- Render ----------\n  return (\n    <div className=\"p-4 md:p-6 max-w-7xl mx-auto space-y-8\">\n      <h1 className=\"text-3xl font-bold text-center mb-4\">Admin Dashboard</h1>\n\n      {errorMsg && <div className=\"text-red-600 text-center\">{errorMsg}</div>}\n      {loading && <div className=\"text-center text-blue-600\">Processing...</div>}\n\n      {/* ---------- Families Section ---------- */}\n      <section className=\"p-4 border rounded space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-lg font-semibold\">Families</h2>\n          <div className=\"flex gap-2\">\n            <input value={searchFamily} onChange={(e) => setSearchFamily(e.target.value)} placeholder=\"Search families...\" className=\"border px-2 py-1 rounded\" />\n            <button onClick={loadAll} className=\"bg-gray-200 px-3 py-1 rounded\">Refresh</button>\n            <button onClick={sendNotifications} className=\"bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded\">Send Notifications</button>\n          </div>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-2\">\n          <div>\n            {/* create family form */}\n            <div className=\"bg-white p-3 rounded shadow\">\n              <h3 className=\"font-semibold mb-2\">Create Family</h3>\n              <div className=\"grid gap-2 md:grid-cols-2\">\n                <input placeholder=\"Family ID\" value={newFamily.familyId} onChange={(e) => setNewFamily({ ...newFamily, familyId: e.target.value })} className=\"border px-2 py-1 rounded\" />\n                <input placeholder=\"Leader name\" value={newFamily.leaderName} onChange={(e) => setNewFamily({ ...newFamily, leaderName: e.target.value })} className=\"border px-2 py-1 rounded\" />\n                <input placeholder=\"Email\" value={newFamily.email} onChange={(e) => setNewFamily({ ...newFamily, email: e.target.value })} className=\"border px-2 py-1 rounded\" />\n                <input placeholder=\"Password\" value={newFamily.password} onChange={(e) => setNewFamily({ ...newFamily, password: e.target.value })} className=\"border px-2 py-1 rounded\" />\n                <input placeholder=\"Members (comma separated)\" value={newFamily.members} onChange={(e) => setNewFamily({ ...newFamily, members: e.target.value })} className=\"border px-2 py-1 rounded md:col-span-2\" />\n                <input placeholder=\"Phone\" value={newFamily.phone} onChange={(e) => setNewFamily({ ...newFamily, phone: e.target.value })} className=\"border px-2 py-1 rounded\" />\n                <input placeholder=\"Address\" value={newFamily.address} onChange={(e) => setNewFamily({ ...newFamily, address: e.target.value })} className=\"border px-2 py-1 rounded\" />\n              </div>\n              <div className=\"mt-2\">\n                <button onClick={createFamily} className=\"bg-green-600 text-white px-3 py-1 rounded\">Create</button>\n              </div>\n            </div>\n\n            {/* families table (scrollable) */}\n            <div className=\"mt-3 h-72 overflow-auto border rounded p-2 bg-white\">\n              <table className=\"min-w-full text-sm\">\n                <thead className=\"bg-gray-100 sticky top-0\">\n                  <tr>\n                    <th className=\"p-2 border\">Sel</th>\n                    <th className=\"p-2 border\">Family ID</th>\n                    <th className=\"p-2 border\">Leader</th>\n                    <th className=\"p-2 border\">Approved</th>\n                    <th className=\"p-2 border\">Latest Tax</th>\n                    <th className=\"p-2 border\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {familiesFiltered.map(f => {\n                    const latest = f.taxHistory?.length ? f.taxHistory[f.taxHistory.length - 1] : null;\n                    return (\n                      <tr key={f._id} className=\"even:bg-gray-50\">\n                        <td className=\"p-2 border text-center\">\n                          <input type=\"checkbox\" checked={selectedFamilies.includes(f._id)} onChange={() => toggleSelectFamily(f._id)} />\n                        </td>\n                        <td className=\"p-2 border\">{f.familyId}</td>\n                        <td className=\"p-2 border\">{f.leaderName}</td>\n                        <td className=\"p-2 border\">{f.approved ? \"Yes\" : \"No\"}</td>\n                        <td className=\"p-2 border\">{latest ? `${latest.month} - ${latest.amount} (${latest.paid ? \"Paid\" : \"Unpaid\"})` : \"No Tax\"}</td>\n                        <td className=\"p-2 border space-x-1\">\n                          <button onClick={() => approveFamily(f._id, true)} className=\"bg-green-500 text-white px-2 py-1 rounded text-xs\">Approve</button>\n                          <button onClick={() => approveFamily(f._id, false)} className=\"bg-red-500 text-white px-2 py-1 rounded text-xs\">Reject</button>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          {/* right column: Tax management and cards */}\n          <div>\n            <div className=\"bg-white p-3 rounded shadow\">\n              <h3 className=\"font-semibold mb-2\">Add Tax (Bulk)</h3>\n              <div className=\"flex flex-col md:flex-row gap-2 items-center\">\n                <label className=\"flex items-center gap-2\">\n                  <input type=\"checkbox\" checked={selectAll} onChange={toggleSelectAll} /> Select All\n                </label>\n\n                <div className=\"flex-1\">\n                  <div className=\"text-xs text-gray-500 mb-1\">Manual select (scroll families left column)</div>\n                  <div className=\"flex gap-2 items-center\">\n                    <input type=\"month\" value={taxMonth} onChange={(e) => setTaxMonth(e.target.value)} className=\"border px-2 py-1 rounded\" />\n                    <input placeholder=\"Amount\" value={taxAmount} onChange={(e) => setTaxAmount(e.target.value)} className=\"border px-2 py-1 rounded\" />\n                    <label className=\"flex items-center gap-1\"><input type=\"checkbox\" checked={taxPaid} onChange={(e) => setTaxPaid(e.target.checked)} /> Mark as Paid</label>\n                    <button onClick={addTaxBulk} className=\"bg-green-600 text-white px-3 py-1 rounded\">Add Tax</button>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"mt-3\">\n                <div className=\"flex justify-between items-center\">\n                  <h4 className=\"font-semibold\">Selected month: {taxMonth}</h4>\n                  <div className=\"text-sm\">Total paid this month: <strong>₹{totalPaidThisMonth}</strong></div>\n                </div>\n              </div>\n            </div>\n\n            {/* Paid / Unpaid cards for selected month */}\n            <div className=\"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3\">\n              <div className=\"bg-white p-3 rounded shadow\">\n                <h4 className=\"font-semibold mb-2\">Paid Families ({paidForSelectedMonth.length})</h4>\n                <div className=\"max-h-48 overflow-auto\">\n                  {paidForSelectedMonth.map(f => {\n                    const t = f.taxHistory.find(x => x.month === taxMonth && x.paid);\n                    return (\n                      <div key={f._id} className=\"flex justify-between items-center py-1 border-b\">\n                        <div>\n                          <div className=\"font-medium\">{f.familyId} — {f.leaderName}</div>\n                          <div className=\"text-sm text-gray-600\">₹{t?.amount} • {t?.month}</div>\n                        </div>\n                        <div className=\"text-sm text-green-600\">Paid</div>\n                      </div>\n                    );\n                  })}\n                  {paidForSelectedMonth.length === 0 && <div className=\"text-gray-500\">No paid families for selected month.</div>}\n                </div>\n              </div>\n\n              <div className=\"bg-white p-3 rounded shadow\">\n                <h4 className=\"font-semibold mb-2\">Pending Families ({unpaidForSelectedMonth.length})</h4>\n                <div className=\"max-h-48 overflow-auto\">\n                  {unpaidForSelectedMonth.map(f => {\n                    const t = f.taxHistory?.find(x => x.month === taxMonth);\n                    const amount = t ? t.amount : taxAmount || \"-\";\n                    const paidFlag = t ? t.paid : false;\n                    // Show only unpaid or missing entries\n                    if (paidFlag) return null;\n                    return (\n                      <div key={f._id} className=\"flex justify-between items-center py-1 border-b\">\n                        <div>\n                          <div className=\"font-medium\">{f.familyId} — {f.leaderName}</div>\n                          <div className=\"text-sm text-gray-600\">Amount: ₹{amount} • {t ? t.month : taxMonth}</div>\n                        </div>\n                        <div className=\"flex flex-col items-end gap-1\">\n                          <button className=\"text-sm bg-blue-600 text-white px-2 py-1 rounded\" onClick={() => markFamilyTaxPaid(f._id, taxMonth)}>Mark Paid</button>\n                        </div>\n                      </div>\n                    );\n                  })}\n                  {unpaidForSelectedMonth.length === 0 && <div className=\"text-gray-500\">No pending families for selected month.</div>}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* ---------- Events / Workers / History / Gallery ---------- */}\n      <section className=\"grid gap-4 md:grid-cols-2\">\n        <div className=\"p-4 border rounded\">\n          <h3 className=\"font-semibold mb-2\">Events</h3>\n          <ul className=\"space-y-2\">\n            {events.map(ev => (\n              <li key={ev._id} className=\"flex justify-between items-center\">\n                <div>{ev.title} • <span className=\"text-sm text-gray-500\">{new Date(ev.date).toLocaleDateString()}</span></div>\n                <button onClick={() => deleteEvent(ev._id)} className=\"text-red-600 underline\">Delete</button>\n              </li>\n            ))}\n          </ul>\n          <div className=\"mt-3 flex gap-2\">\n            <input placeholder=\"Title\" value={newEvent.title} onChange={(e) => setNewEvent({ ...newEvent, title: e.target.value })} className=\"border px-2 py-1 rounded flex-1\" />\n            <input type=\"date\" value={newEvent.date} onChange={(e) => setNewEvent({ ...newEvent, date: e.target.value })} className=\"border px-2 py-1 rounded\" />\n            <button onClick={addEvent} className=\"bg-green-600 text-white px-3 py-1 rounded\">Add</button>\n          </div>\n        </div>\n\n        <div className=\"p-4 border rounded\">\n          <h3 className=\"font-semibold mb-2\">Workers</h3>\n          <ul className=\"space-y-2\">\n            {workers.map(w => (\n              <li key={w._id} className=\"flex justify-between items-center\">\n                <div>\n                  <div className=\"font-medium\">{w.type}</div>\n                  <div className=\"text-sm text-gray-600\">{w.description}</div>\n                </div>\n                <button onClick={() => deleteWorker(w._id)} className=\"text-red-600 underline\">Delete</button>\n              </li>\n            ))}\n          </ul>\n          <div className=\"mt-3 grid gap-2\">\n            <input placeholder=\"Work type\" value={newWorker.type} onChange={(e) => setNewWorker({ ...newWorker, type: e.target.value })} className=\"border px-2 py-1 rounded\" />\n            <input placeholder=\"Description\" value={newWorker.description} onChange={(e) => setNewWorker({ ...newWorker, description: e.target.value })} className=\"border px-2 py-1 rounded\" />\n            <button onClick={addWorker} className=\"bg-green-600 text-white px-3 py-1 rounded\">Add Worker</button>\n          </div>\n        </div>\n\n        <div className=\"p-4 border rounded\">\n          <h3 className=\"font-semibold mb-2\">History</h3>\n          <ul className=\"space-y-2\">\n            {historyItems.map(h => (\n              <li key={h._id} className=\"flex justify-between items-center\">\n                <div>{h.content?.en || h.content?.ta}</div>\n                <button onClick={() => deleteHistory(h._id)} className=\"text-red-600 underline\">Delete</button>\n              </li>\n            ))}\n          </ul>\n          <div className=\"mt-3 grid gap-2\">\n            <input placeholder=\"Content (EN)\" value={newHistory.contentEN} onChange={(e) => setNewHistory({ ...newHistory, contentEN: e.target.value })} className=\"border px-2 py-1 rounded\" />\n            <input placeholder=\"Content (TA)\" value={newHistory.contentTA} onChange={(e) => setNewHistory({ ...newHistory, contentTA: e.target.value })} className=\"border px-2 py-1 rounded\" />\n            <button onClick={addHistory} className=\"bg-green-600 text-white px-3 py-1 rounded\">Add</button>\n          </div>\n        </div>\n\n        <div className=\"p-4 border rounded\">\n          <h3 className=\"font-semibold mb-2\">Gallery (Photos & Videos)</h3>\n          <ul className=\"space-y-2\">\n            {gallery.map(g => (\n              <li key={g._id} className=\"flex justify-between items-center\">\n                <div>\n                  <div className=\"font-medium\">{g.title}</div>\n                  <div className=\"text-sm text-gray-600\">{g.description}</div>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <a href={`${API_BASE}${g.url}`} target=\"_blank\" rel=\"noreferrer\" className=\"text-blue-600 underline\">View</a>\n                  <button onClick={() => deleteGallery(g._id)} className=\"text-red-600 underline\">Delete</button>\n                </div>\n              </li>\n            ))}\n          </ul>\n\n          <div className=\"mt-3 grid gap-2\">\n            <input type=\"file\" onChange={(e) => setGalleryFile(e.target.files[0])} className=\"border px-2 py-1 rounded\" />\n            <input placeholder=\"Title\" value={galleryMeta.title} onChange={(e) => setGalleryMeta({ ...galleryMeta, title: e.target.value })} className=\"border px-2 py-1 rounded\" />\n            <input placeholder=\"Description\" value={galleryMeta.description} onChange={(e) => setGalleryMeta({ ...galleryMeta, description: e.target.value })} className=\"border px-2 py-1 rounded\" />\n            <button onClick={uploadGallery} className=\"bg-green-600 text-white px-3 py-1 rounded\">Upload</button>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}