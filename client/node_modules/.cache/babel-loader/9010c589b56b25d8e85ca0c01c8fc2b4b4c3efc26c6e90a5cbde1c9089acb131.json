{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\murug\\\\Downloads\\\\udaikulam-village-portal (1)\\\\client\\\\src\\\\pages\\\\History.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useTranslation } from \"react-i18next\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst History = () => {\n  _s();\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const [history, setHistory] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchHistory = async () => {\n      try {\n        const res = await axios.get(\"http://localhost:5000/api/admin/history\");\n        if (res.data.length > 0) {\n          const latestHistory = res.data[res.data.length - 1]; // pick latest entry\n          const lang = i18n.language;\n          if (latestHistory.content && latestHistory.content[lang]) {\n            setHistory(latestHistory.content[lang]);\n          } else {\n            setHistory(\"History not available in this language.\");\n          }\n        } else {\n          setHistory(\"No history found.\");\n        }\n      } catch (err) {\n        console.error(\"Error fetching history:\", err);\n        setError(\"Failed to load history. Please try again later.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchHistory();\n  }, [i18n.language]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-8 text-center text-lg font-semibold\",\n      children: \"Loading history...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-8 text-center text-red-600 font-semibold\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-8 max-w-4xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold mb-4\",\n      children: t(\"history\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-lg whitespace-pre-line\",\n      children: history\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(History, \"DLUzCaGuAkh4N4Jq99zCZf1b29Q=\", false, function () {\n  return [useTranslation];\n});\n_c = History;\nexport default History;\nvar _c;\n$RefreshReg$(_c, \"History\");","map":{"version":3,"names":["React","useEffect","useState","axios","useTranslation","jsxDEV","_jsxDEV","History","_s","t","i18n","history","setHistory","loading","setLoading","error","setError","fetchHistory","res","get","data","length","latestHistory","lang","language","content","err","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/murug/Downloads/udaikulam-village-portal (1)/client/src/pages/History.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useTranslation } from \"react-i18next\";\n\nconst History = () => {\n  const { t, i18n } = useTranslation();\n  const [history, setHistory] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchHistory = async () => {\n      try {\n        const res = await axios.get(\"http://localhost:5000/api/admin/history\");\n\n        if (res.data.length > 0) {\n          const latestHistory = res.data[res.data.length - 1]; // pick latest entry\n          const lang = i18n.language;\n\n          if (latestHistory.content && latestHistory.content[lang]) {\n            setHistory(latestHistory.content[lang]);\n          } else {\n            setHistory(\"History not available in this language.\");\n          }\n        } else {\n          setHistory(\"No history found.\");\n        }\n      } catch (err) {\n        console.error(\"Error fetching history:\", err);\n        setError(\"Failed to load history. Please try again later.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchHistory();\n  }, [i18n.language]);\n\n  if (loading) {\n    return (\n      <div className=\"p-8 text-center text-lg font-semibold\">\n        Loading history...\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-8 text-center text-red-600 font-semibold\">\n        {error}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-8 max-w-4xl mx-auto\">\n      <h2 className=\"text-3xl font-bold mb-4\">{t(\"history\")}</h2>\n      <p className=\"text-lg whitespace-pre-line\">{history}</p>\n    </div>\n  );\n};\n\nexport default History;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,cAAc,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB,MAAM;IAAEC,CAAC;IAAEC;EAAK,CAAC,GAAGN,cAAc,CAAC,CAAC;EACpC,MAAM,CAACO,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACW,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACa,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAExCD,SAAS,CAAC,MAAM;IACd,MAAMgB,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMf,KAAK,CAACgB,GAAG,CAAC,yCAAyC,CAAC;QAEtE,IAAID,GAAG,CAACE,IAAI,CAACC,MAAM,GAAG,CAAC,EAAE;UACvB,MAAMC,aAAa,GAAGJ,GAAG,CAACE,IAAI,CAACF,GAAG,CAACE,IAAI,CAACC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;UACrD,MAAME,IAAI,GAAGb,IAAI,CAACc,QAAQ;UAE1B,IAAIF,aAAa,CAACG,OAAO,IAAIH,aAAa,CAACG,OAAO,CAACF,IAAI,CAAC,EAAE;YACxDX,UAAU,CAACU,aAAa,CAACG,OAAO,CAACF,IAAI,CAAC,CAAC;UACzC,CAAC,MAAM;YACLX,UAAU,CAAC,yCAAyC,CAAC;UACvD;QACF,CAAC,MAAM;UACLA,UAAU,CAAC,mBAAmB,CAAC;QACjC;MACF,CAAC,CAAC,OAAOc,GAAG,EAAE;QACZC,OAAO,CAACZ,KAAK,CAAC,yBAAyB,EAAEW,GAAG,CAAC;QAC7CV,QAAQ,CAAC,iDAAiD,CAAC;MAC7D,CAAC,SAAS;QACRF,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDG,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,CAACP,IAAI,CAACc,QAAQ,CAAC,CAAC;EAEnB,IAAIX,OAAO,EAAE;IACX,oBACEP,OAAA;MAAKsB,SAAS,EAAC,uCAAuC;MAAAC,QAAA,EAAC;IAEvD;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAEV;EAEA,IAAIlB,KAAK,EAAE;IACT,oBACET,OAAA;MAAKsB,SAAS,EAAC,4CAA4C;MAAAC,QAAA,EACxDd;IAAK;MAAAe,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,oBACE3B,OAAA;IAAKsB,SAAS,EAAC,uBAAuB;IAAAC,QAAA,gBACpCvB,OAAA;MAAIsB,SAAS,EAAC,yBAAyB;MAAAC,QAAA,EAAEpB,CAAC,CAAC,SAAS;IAAC;MAAAqB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAC3D3B,OAAA;MAAGsB,SAAS,EAAC,6BAA6B;MAAAC,QAAA,EAAElB;IAAO;MAAAmB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACrD,CAAC;AAEV,CAAC;AAACzB,EAAA,CAxDID,OAAO;EAAA,QACSH,cAAc;AAAA;AAAA8B,EAAA,GAD9B3B,OAAO;AA0Db,eAAeA,OAAO;AAAC,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}