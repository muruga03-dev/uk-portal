{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{useTranslation}from\"react-i18next\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const History=()=>{const{t,i18n}=useTranslation();const[history,setHistory]=useState(\"\");const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const API_BASE=process.env.REACT_APP_API_URL||\"http://localhost:5000\";useEffect(()=>{const fetchHistory=async()=>{try{var _res$data;const res=await axios.get(\"\".concat(API_BASE,\"/api/admin/history\"));const latestHistory=(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data[res.data.length-1];if(latestHistory!==null&&latestHistory!==void 0&&latestHistory.content){const lang=i18n.language;setHistory(latestHistory.content[lang]||t(\"history_not_available\"));}else{setHistory(t(\"no_history_found\"));}}catch(err){console.error(\"Error fetching history:\",err);setError(t(\"failed_load_history\"));}finally{setLoading(false);}};fetchHistory();},[i18n.language,API_BASE,t]);if(loading)return/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center text-lg font-semibold animate-pulse\",children:[\"\\u23F3 \",t(\"loading_history\")]});if(error)return/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center text-red-600 font-semibold\",children:[\"\\u26A0\\uFE0F \",error]});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 max-w-4xl mx-auto bg-white shadow-md rounded-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-6 text-center text-green-700\",children:t(\"history\")}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg whitespace-pre-line text-gray-800\",children:history})]});};export default History;","map":{"version":3,"names":["React","useEffect","useState","axios","useTranslation","jsxs","_jsxs","jsx","_jsx","History","t","i18n","history","setHistory","loading","setLoading","error","setError","API_BASE","process","env","REACT_APP_API_URL","fetchHistory","_res$data","res","get","concat","latestHistory","data","length","content","lang","language","err","console","className","children"],"sources":["C:/Users/murug/Downloads/udaikulam-village-portal (1)/client/src/pages/History.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useTranslation } from \"react-i18next\";\n\nconst History = () => {\n  const { t, i18n } = useTranslation();\n  const [history, setHistory] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const API_BASE = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\n\n  useEffect(() => {\n    const fetchHistory = async () => {\n      try {\n        const res = await axios.get(`${API_BASE}/api/admin/history`);\n        const latestHistory = res.data?.[res.data.length - 1];\n\n        if (latestHistory?.content) {\n          const lang = i18n.language;\n          setHistory(latestHistory.content[lang] || t(\"history_not_available\"));\n        } else {\n          setHistory(t(\"no_history_found\"));\n        }\n      } catch (err) {\n        console.error(\"Error fetching history:\", err);\n        setError(t(\"failed_load_history\"));\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchHistory();\n  }, [i18n.language, API_BASE, t]);\n\n  if (loading)\n    return (\n      <div className=\"p-8 text-center text-lg font-semibold animate-pulse\">\n        ⏳ {t(\"loading_history\")}\n      </div>\n    );\n\n  if (error)\n    return (\n      <div className=\"p-8 text-center text-red-600 font-semibold\">\n        ⚠️ {error}\n      </div>\n    );\n\n  return (\n    <div className=\"p-8 max-w-4xl mx-auto bg-white shadow-md rounded-lg\">\n      <h2 className=\"text-3xl font-bold mb-6 text-center text-green-700\">\n        {t(\"history\")}\n      </h2>\n      <p className=\"text-lg whitespace-pre-line text-gray-800\">{history}</p>\n    </div>\n  );\n};\n\nexport default History;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,cAAc,KAAQ,eAAe,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAE/C,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CACpB,KAAM,CAAEC,CAAC,CAAEC,IAAK,CAAC,CAAGP,cAAc,CAAC,CAAC,CACpC,KAAM,CAACQ,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAExC,KAAM,CAAAgB,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,uBAAuB,CAEzEpB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,KAAAC,SAAA,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAArB,KAAK,CAACsB,GAAG,IAAAC,MAAA,CAAIR,QAAQ,sBAAoB,CAAC,CAC5D,KAAM,CAAAS,aAAa,EAAAJ,SAAA,CAAGC,GAAG,CAACI,IAAI,UAAAL,SAAA,iBAARA,SAAA,CAAWC,GAAG,CAACI,IAAI,CAACC,MAAM,CAAG,CAAC,CAAC,CAErD,GAAIF,aAAa,SAAbA,aAAa,WAAbA,aAAa,CAAEG,OAAO,CAAE,CAC1B,KAAM,CAAAC,IAAI,CAAGpB,IAAI,CAACqB,QAAQ,CAC1BnB,UAAU,CAACc,aAAa,CAACG,OAAO,CAACC,IAAI,CAAC,EAAIrB,CAAC,CAAC,uBAAuB,CAAC,CAAC,CACvE,CAAC,IAAM,CACLG,UAAU,CAACH,CAAC,CAAC,kBAAkB,CAAC,CAAC,CACnC,CACF,CAAE,MAAOuB,GAAG,CAAE,CACZC,OAAO,CAAClB,KAAK,CAAC,yBAAyB,CAAEiB,GAAG,CAAC,CAC7ChB,QAAQ,CAACP,CAAC,CAAC,qBAAqB,CAAC,CAAC,CACpC,CAAC,OAAS,CACRK,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDO,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACX,IAAI,CAACqB,QAAQ,CAAEd,QAAQ,CAAER,CAAC,CAAC,CAAC,CAEhC,GAAII,OAAO,CACT,mBACER,KAAA,QAAK6B,SAAS,CAAC,qDAAqD,CAAAC,QAAA,EAAC,SACjE,CAAC1B,CAAC,CAAC,iBAAiB,CAAC,EACpB,CAAC,CAGV,GAAIM,KAAK,CACP,mBACEV,KAAA,QAAK6B,SAAS,CAAC,4CAA4C,CAAAC,QAAA,EAAC,eACvD,CAACpB,KAAK,EACN,CAAC,CAGV,mBACEV,KAAA,QAAK6B,SAAS,CAAC,qDAAqD,CAAAC,QAAA,eAClE5B,IAAA,OAAI2B,SAAS,CAAC,oDAAoD,CAAAC,QAAA,CAC/D1B,CAAC,CAAC,SAAS,CAAC,CACX,CAAC,cACLF,IAAA,MAAG2B,SAAS,CAAC,2CAA2C,CAAAC,QAAA,CAAExB,OAAO,CAAI,CAAC,EACnE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAH,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}